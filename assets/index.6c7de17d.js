var T=Object.defineProperty,V=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var C=(e,s,i)=>s in e?T(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i,f=(e,s)=>{for(var i in s||(s={}))U.call(s,i)&&C(e,i,s[i]);if(k)for(var i of k(s))z.call(s,i)&&C(e,i,s[i]);return e},w=(e,s)=>V(e,R(s));import{c as b,d as j,b as D}from"./index.90779013.js";import{T as x,C as N,h as F,_ as L}from"./Card.d7e2cdc6.js";import{S as E}from"./Sidebar.606a9025.js";import{_ as G,m as P,a as Y,r as p,o as n,c as d,b as t,F as g,d as h,t as l,h as m,f as c,p as W,k as q,w as y,g as H}from"./index.3f821aa2.js";import{v as O}from"./video.es.ad527ff0.js";import"./_commonjsHelpers.0592d25c.js";var J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAaCAYAAADSbo4CAAADX0lEQVRIiaWXe2iPURjHP5tb0TCXaIWFzGUMIcwlIZcQGbmFLEam+Mv8MbmF+YPcqSUhMja5X7IaW0shW8wlucxlYm65zG1GTz2vjtN73r3jW79+57zPc875vs9znssbkZ2dTQ3RDBgHDAM6AC2BekAFUAaUAKeAM8D3sFvXrgGHBGAJkAQ0cOi0BvoCyUpqP7ABeFvd5pEhCIjOJqAImOVD4j3wBPhgPY8BlgL3gQX/S6SPmnqx8ewrsA+YBnQBWgGx+i9WmwPkGPpNgB3AUaCh66CgOzIJyLKeyYZrgefVvSHQFUjXfTw81rv1wFZ2WSTZIiELBwMLQ5IQ3AQmq+U+6TOx3A0gPgyRqUCmMb+gLrgckoCNQ0A3wwpRwDV1pZNIInDQmIvfRgDffA6IBlKBE8AlYA8w3kHmEdAduKNzCfcrQB1PwbwjjYFyI6RPA2McG0se2atkbMgBo4F3PrL6GkUxOi8ABtoWOW+QKAkgIXniuIOEJ7/qkFWo1T0MANJMIikaqoIqYIhjI9RdHgqBkRq2czW0Be2A1Y71Ejljjfk6oLO4RmL7teGviVYeMJGo5hTcBTpZcnnDfB1/1BxS6djrADBdx8VikZ0GicwAEoIexnirj7xAMzAaHbEBe83Q+yJIiFQzeigPWCiIMMY/HTpVDn0//IkaITLbUFgG9A9YWGyMU33kvYGeOv6s98GFI4bF8iLV12sM5ZMBVTnfsJpkx1xgEBCnps41dLcDPxz7JOnPQ7KZRyTztdXxOWCUYxNJ9XkBbyp4pm/r576ORmJDwzfDzCPDjbGE5BbHIZJFp6jp/SCXtZeDRLQRdaiFM7AS2kM9wMMiT8kHh4H22m9c1NqRpXVKIuulz5rmwHWgqc5fAEM9oV8bkKZJxsNuYL6DUFjEa+b2Unulvkipt96v+q4HVhrzFDVh3D+SSNHS75H4otFVaiq5+pEVVlcmGfM2sEoTVRj00wZ6lxGFT9V1Rfb6oFZxs9aEV4ZuukbXNpW1AWqpPEprzjzt4gutyMtR+T2/w8J8Tsjl2gjMdMjLtANrATTykUsdW66lxIkwXfwb7d6lIh8Dflly8b1839gkxA3S34oskISgJt81ksTkJ+6YoIlNDpEPrrr6OSH97C3t2s4G1KO/AfwGNmW4aLwRpyMAAAAASUVORK5CYII=";const Q={name:"Info",components:{Sidebar:E,Title:x,Card:N},data(){return{id:"",data:{},_ads:[],videos:[],player:null,relatedMap:{"ko-KR":"\uAD00\uB828\uB3D9\uC601\uC0C1","en-US":"Related videos","zh-CN":"\u76F8\u5173\u89C6\u9891"},moreRelatedMap:{"ko-KR":"\uAD00\uB828 \uC601\uC0C1 \uB354 \uBCF4\uAE30","en-US":"More related videos","zh-CN":"\u66F4\u591A\u76F8\u5173\u89C6\u9891"}}},computed:f({},P({ads:e=>e.common.ads,menus:e=>e.common.menus,language:e=>e.common.language})),watch:{$route:{handler(e){e.name=="info"&&(this.id=this.$route.query.id,this.initData())},immediate:!0},ads(e){this._ads=JSON.parse(JSON.stringify(e))}},methods:w(f({},Y({toggleLoading:"common/toggleLoading"})),{goAd(e){window.open(e)},formatTime(e){return F(e).format("YYYY-HH-DD")},async getVideoInfo(){this.toggleLoading(!0);try{let{data:e,code:s}=await b({id:this.id});s==200&&(this.data=e,this.initPlayer(),this.getMenuInfo())}catch{}finally{this.toggleLoading(!1)}},async getMenuInfo(){try{let{data:e,code:s}=await j({id:this.data.classifyId});s==200&&(this.classifyInfo=e)}catch{}finally{this.toggleLoading(!1)}},async getVideos(){try{let{rows:e,code:s}=await D({pageNum:1,pageSize:20,classifyId:this.data.classifyId,specialId:this.data.specialId});s==200&&(this.videos=e)}catch{}finally{}},goCategory(){this.$router.push({name:"category",query:{classifyId:this.data.classifyId,specialId:this.data.specialId,classifyName:""}})},initPlayer(){document.getElementById("video-info").innerHTML='<video id="video-js" class="video-js"></video>',setTimeout(()=>{this.player=O(document.getElementById("video-js"),{controls:!0,muted:!0,fluid:!0,reload:"auto",poster:this.data.videoCover,sources:[{src:this.data.video,type:"application/x-mpegURL"}]},function(){})},0)},initData(){if(this.player&&this.player.dispose(),this.id=this.$route.query.id,this.getVideoInfo(),this.menus&&this.menus.length){let e=(this.menus.length+1)*24+1,s=Math.ceil(e/this.ads.length),i=[];for(let _=0;_<s;_++)i=i.concat(this.ads);i.shift(),this._ads=i}this.getVideos()}}),beforeUnmount(){this.player&&this.player.dispose()}},A=e=>(W("data-v-253278ac"),e=e(),q(),e),Z={class:"info-container"},K={class:"info-wrapper"},X={class:"ads pc-hide",style:{"padding-top":"0","margin-top":"0px"}},$={class:"ads-item"},ee={class:"video-info"},se={class:"info-h5 pc-hide"},te={class:"viewed"},ie=A(()=>t("img",{src:L,alt:""},null,-1)),ae={class:"time"},oe=A(()=>t("div",{class:"video-img",id:"video-info"},null,-1)),ne={class:"info h5-hide"},de={class:"viewed"},le=A(()=>t("img",{src:J,alt:""},null,-1)),ce={class:"time"},re={class:"video-name"},pe={key:0},ge={key:1},he={key:2},me={key:0,class:"video-desc"},_e={class:"ads h5-hide"},ue={class:"ads-item"},ve={class:"list"},fe={class:"ads"},ye={class:"ads-item"};function Ae(e,s,i,_,a,r){const u=p("van-loading"),v=p("van-image"),M=p("Title"),B=p("Card"),S=p("Sidebar");return n(),d("div",Z,[t("div",K,[t("div",X,[(n(!0),d(g,null,h(a._ads.slice(0,4),o=>(n(),d("div",$,[c(v,{onClick:I=>r.goAd(o.link),fit:"cover",position:"center","lazy-load":!0,src:o.picUrl},{loading:y(()=>[c(u,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),256))]),t("div",ee,[t("div",se,[t("div",te,[ie,t("span",null,l(a.data.watchTimes),1)]),t("div",ae,l(r.formatTime(a.data.updatedAt)),1)]),oe,t("div",ne,[t("div",de,[le,t("span",null,l(a.data.watchTimes),1)]),t("div",ce,l(r.formatTime(a.data.updatedAt)),1)]),t("div",re,[e.language=="ko-KR"?(n(),d("span",pe,l(a.data.title),1)):m("",!0),e.language=="en-US"?(n(),d("span",ge,l(a.data.titleUs),1)):m("",!0),e.language=="zh-CN"?(n(),d("span",he,l(a.data.titleCn),1)):m("",!0)]),a.data.titleChinese?(n(),d("div",me,l(a.data.titleChinese),1)):m("",!0)]),t("div",_e,[(n(!0),d(g,null,h(a._ads.slice(0,24),o=>(n(),d("div",ue,[c(v,{onClick:I=>r.goAd(o.link),fit:"cover",position:"center","lazy-load":!0,src:o.picUrl},{loading:y(()=>[c(u,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),256))]),c(M,{class:"page-title h5-hide",name:a.relatedMap[e.language],more:!1},null,8,["name"]),t("div",ve,[(n(!0),d(g,null,h(a.videos,o=>(n(),H(B,{class:"video-card",item:o,key:o.id},null,8,["item"]))),128))]),t("div",fe,[(n(!0),d(g,null,h(a._ads.slice(24,48),o=>(n(),d("div",ye,[c(v,{onClick:I=>r.goAd(o.link),fit:"cover",position:"center","lazy-load":!0,src:o.picUrl},{loading:y(()=>[c(u,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),256))]),t("div",{class:"more",onClick:s[0]||(s[0]=(...o)=>r.goCategory&&r.goCategory(...o))},l(a.moreRelatedMap[e.language]),1)]),c(S)])}var Te=G(Q,[["render",Ae],["__scopeId","data-v-253278ac"]]);export{Te as default};
