var A=Object.defineProperty,U=Object.defineProperties;var L=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var I=(s,t,a)=>t in s?A(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,z=(s,t)=>{for(var a in t||(t={}))T.call(t,a)&&I(s,a,t[a]);if(w)for(var a of w(t))q.call(t,a)&&I(s,a,t[a]);return s},x=(s,t)=>U(s,L(t));import{s as B,b}from"./index.90779013.js";import{C as F,T as D}from"./Card.d7e2cdc6.js";import{_ as E,m as M,a as j,r as u,o as i,c as o,b as p,t as G,h as v,F as r,d,f as n,w as _,p as H,k as J,g as C}from"./index.3f821aa2.js";const K={name:"Category",components:{Card:F,Title:D},data(){return{pageNum:1,pageSize:20,total:0,classifyName:"",classifyId:"",specialId:"",search:"",data:[],_ads:[]}},watch:{$route:{handler(s,t){s.name=="category"&&(this.data=[],this.page=1,this.total=0,this.classifyName=this.$route.query.classifyName,this.classifyId=this.$route.query.classifyId,this.specialId=this.$route.query.specialId,this.search=this.$route.query.search,this.getVideos())},immediate:!0},pageNum(){window.scrollTo(0,0),this.getVideos()}},computed:z({},M({ads:s=>s.common.ads})),methods:x(z({},j({toggleLoading:"common/toggleLoading"})),{async getVideos(){this.toggleLoading(!0);try{if(this.search){let{rows:s,code:t,total:a}=await B({title:this.search,pageNum:this.pageNum,pageSize:this.pageSize});t==200&&(this.data=s,this.total=a)}else{let{rows:s,code:t,total:a}=await b({pageNum:this.pageNum,pageSize:this.pageSize,classifyId:this.classifyId,specialId:this.specialId});t==200&&(this.data=s,this.total=a)}}catch{}finally{this.toggleLoading(!1)}},goAd(s){window.open(s)}}),mounted(){if(this.ads.length){let t=Math.ceil(46/this.ads.length),a=[];for(let f=0;f<t;f++)a=a.concat(this.ads);a.shift(),this._ads=a}}},O=s=>(H("data-v-4a5e5c8f"),s=s(),J(),s),P={class:"category-container"},Q={key:0,class:"title-container-custom h5-hide"},R={class:"name"},W=O(()=>p("div",{class:"more"},null,-1)),X={class:"ads h5-only"},Y={class:"list"},Z={class:"ads h5-hide"},$={key:1,class:"list"},ee={key:2,class:"ads h5-hide"},se={key:3,class:"list"},te={key:4,class:"ads"},ie={class:"pagination"},ae={class:"ads h5-only"};function oe(s,t,a,f,l,h){const g=u("van-loading"),m=u("van-image"),S=u("Title"),k=u("Card"),N=u("van-icon"),V=u("van-pagination");return i(),o("div",P,[l.classifyName?(i(),o("div",Q,[p("div",R,G(l.classifyName),1),W])):v("",!0),p("div",X,[(i(!0),o(r,null,d(l._ads.slice(0,4),(e,c)=>(i(),o("div",{class:"ads-item",key:e.title+"_"+c},[n(m,{onClick:y=>h.goAd(e.link),fit:"cover",position:"center","lazy-load":!0,src:e.picUrl},{loading:_(()=>[n(g,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),128))]),n(S,{class:"page-title pc-hide",name:"\uD55C\uAD6D",more:!1}),p("div",Y,[(i(!0),o(r,null,d(l.data.slice(0,8),e=>(i(),C(k,{class:"video-card",size:"large",item:e},null,8,["item"]))),256))]),p("div",Z,[(i(!0),o(r,null,d(l._ads.slice(0,15),(e,c)=>(i(),o("div",{class:"ads-item",key:e.title+"_"+c},[n(m,{onClick:y=>h.goAd(e.link),fit:"cover",position:"center","lazy-load":!0,src:e.picUrl},{loading:_(()=>[n(g,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),128))]),l.data.slice(8,16).length?(i(),o("div",$,[(i(!0),o(r,null,d(l.data.slice(8,16),e=>(i(),C(k,{class:"video-card",size:"large",item:e},null,8,["item"]))),256))])):v("",!0),l.data.slice(8,16).length?(i(),o("div",ee,[(i(!0),o(r,null,d(l._ads.slice(15,30),(e,c)=>(i(),o("div",{class:"ads-item",key:e.title+"_"+c},[n(m,{onClick:y=>h.goAd(e.link),fit:"cover",position:"center","lazy-load":!0,src:e.picUrl},{loading:_(()=>[n(g,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),128))])):v("",!0),l.data.slice(16,20).length?(i(),o("div",se,[(i(!0),o(r,null,d(l.data.slice(16,20),e=>(i(),C(k,{class:"video-card",size:"large",item:e},null,8,["item"]))),256))])):v("",!0),l.data.slice(16,20).length?(i(),o("div",te,[(i(!0),o(r,null,d(l._ads.slice(30,45),(e,c)=>(i(),o("div",{class:"ads-item",key:e.title+"_"+c},[n(m,{onClick:y=>h.goAd(e.link),fit:"cover",position:"center","lazy-load":!0,src:e.picUrl},{loading:_(()=>[n(g,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),128))])):v("",!0),p("div",ie,[n(V,{modelValue:l.pageNum,"onUpdate:modelValue":t[0]||(t[0]=e=>l.pageNum=e),"total-items":l.total,"items-per-page":l.pageSize,"show-page-size":5},{"prev-text":_(()=>[n(N,{name:"arrow-left"})]),"next-text":_(()=>[n(N,{name:"arrow"})]),_:1},8,["modelValue","total-items","items-per-page"])]),p("div",ae,[(i(!0),o(r,null,d(l._ads.slice(0,4),(e,c)=>(i(),o("div",{class:"ads-item",key:e.title+"_"+c},[n(m,{onClick:y=>h.goAd(e.link),fit:"cover",position:"center","lazy-load":!0,src:e.picUrl},{loading:_(()=>[n(g,{type:"spinner",size:"20"})]),_:2},1032,["onClick","src"])]))),128))])])}var de=E(K,[["render",oe],["__scopeId","data-v-4a5e5c8f"]]);export{de as default};
